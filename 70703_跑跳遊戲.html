<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>跳跳龍 (Dino Game) - 規律慢速經典版</title>
    <style>
        /* CSS 樣式 */
        body {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            background-color: #f7f7f7;
            overflow: hidden; 
        }

        #game-container {
            width: 800px;
            height: 200px;
            border-bottom: 2px solid #333; 
            position: relative;
            background-color: #fff;
            overflow: hidden; 
        }

        #dino {
            width: 30px;
            height: 40px;
            background-color: #555; 
            position: absolute;
            bottom: 0px; 
            left: 50px; /* 恐龍固定在左邊 */
            transition: bottom 0.2s; 
        }

        .cactus {
            width: 20px;
            height: 40px;
            background-color: green; 
            position: absolute;
            bottom: 0px;
            right: 0px; /* 從右邊界開始 */
        }

        .jump {
            animation: jump-animation 0.5s ease-out;
            animation-fill-mode: forwards; 
        }

        /* 定義跳躍動畫 */
        @keyframes jump-animation {
            0% { bottom: 0px; }
            45% { bottom: 120px; } /* 跳到最高點 */
            55% { bottom: 120px; } 
            100% { bottom: 0px; }
        }

        #game-over-text {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 30px;
            color: red;
            font-weight: bold;
            display: none; /* 初始隱藏 */
        }
    </style>
</head>
<body>

<div id="game-container">
    <div id="dino"></div>
    <div id="game-over-text">遊戲結束！按空白鍵重新開始</div>
</div>

<script>
    // JavaScript 遊戲邏輯
    const dino = document.getElementById('dino');
    const gameContainer = document.getElementById('game-container');
    const gameOverText = document.getElementById('game-over-text');
    
    let isJumping = false;
    let isGameOver = false;
    let score = 0;
    
    // --- 常數定義 ---
    const CACTUS_INTERVAL = 2000; // 仙人掌生成間隔：2000ms (2 秒) - 規律
    const CACTUS_SPEED = 3;       // 仙人掌移動速度：3 - 慢速

    // --- 恐龍跳躍邏輯 ---
    function jump() {
        if (isJumping || isGameOver) return;
        
        isJumping = true;
        dino.classList.add('jump');

        setTimeout(() => {
            dino.classList.remove('jump');
            isJumping = false;
        }, 500);
    }

    document.addEventListener('keydown', (event) => {
        if (event.code === 'Space' || event.code === 'ArrowUp') {
            if (isGameOver) {
                resetGame();
            } else {
                jump();
            }
        }
    });

    // --- 障礙物生成與移動邏輯 ---
    function generateCactus() {
        if (isGameOver) return;
        
        const cactus = document.createElement('div');
        cactus.classList.add('cactus');
        gameContainer.appendChild(cactus);

        let cactusPosition = -20; // 仙人掌初始位置在右邊界外 

        function moveCactus() {
            if (isGameOver) return;

            // 向左移動 (增加 right 的值)
            cactusPosition += CACTUS_SPEED;
            cactus.style.right = cactusPosition + 'px';

            // 檢查碰撞：當仙人掌距離右邊界 690px 到 750px 之間
            if (cactusPosition > 690 && cactusPosition < 750) { 
                const dinoBottom = parseInt(window.getComputedStyle(dino).getPropertyValue('bottom'));
                
                if (dinoBottom <= 40) { 
                    gameOver();
                    return;
                }
            }
            
            // 障礙物超出左邊界
            if (cactusPosition > 800) { 
                cactus.remove();
                score++; 
            } else {
                requestAnimationFrame(moveCactus);
            }
        }
        
        requestAnimationFrame(moveCactus);

        // 規律設定下一次生成時間
        setTimeout(generateCactus, CACTUS_INTERVAL);
    }
    
    // --- 遊戲結束/重置邏輯 ---
    function gameOver() {
        isGameOver = true;
        gameOverText.style.display = 'block';
    }

    function resetGame() {
        isGameOver = false;
        gameOverText.style.display = 'none';
        score = 0;
        
        document.querySelectorAll('.cactus').forEach(c => c.remove());
        
        generateCactus();
    }
    
    // 遊戲啟動
    generateCactus();

</script>

</body>
</html>

